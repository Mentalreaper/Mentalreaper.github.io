<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Random Magical Effects - 10,000 Effects</title>
    <script src="/static/javascript/random-magical-effect.js" defer></script> 
    <link rel="stylesheet" href="/static/css/random-magical-effect.css">
</head>
<body>
    <script defer></script>
    <div id="starfield"></div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="title">Random Magical Effects - 10,000 Effects</h1>
            <div class="subtitle">Suffering Awaits!</div>
        </div>

        <!-- Characters Panel -->
        <div class="panel characters-panel" id="charactersPanel">
            <div class="panel-header">
                <div class="panel-title">Characters</div>
                <div style="display: flex; gap: 8px;">
                    <button class="btn btn-outline" onclick="importData()" style="padding: 6px 12px; font-size: 0.85rem;">Import</button>
                    <button class="btn btn-outline" onclick="exportData()" style="padding: 6px 12px; font-size: 0.85rem;">Export</button>
                </div>
            </div>
            <div class="character-list" id="characterList"></div>
            <button class="btn btn-primary" onclick="openCharacterModal()" style="width: 100%;">
                + Add Character
            </button>
        </div>

        <!-- Spinner Section -->
        <div class="spinner-section">
            <!-- File Selector -->
            <div class="file-selector">
                <label class="file-label" style="color: var(--text-dim); font-size: 0.85rem;">Effect Set:</label>
                <select class="file-select" id="effectSetSelect" onchange="changeEffectSet(this.value)">
                    <option value="1">v1.2 (d10,000)</option>
                    <option value="2">v2.0 (d10,000)</option>
                </select>
            </div>

            <div class="spinner-container">
                <div class="spinner-wrapper" id="spinnerWrapper">
                    <!-- SVG spinner will be inserted here by JavaScript -->
                    <div class="spinner gpu-accelerated" id="mainSpinner"></div>
                    <div class="spinner-center" id="spinnerCenter">SPIN</div>
                    <div class="spinner-pointer"></div>

                </div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" id="spinBtn" onclick="spinMainWheel()">
                    SPIN
                </button>
                <button class="btn btn-accent" id="instantSpinBtn" onclick="instantSpin()">
                    INSTANT SPIN
                </button>
            </div>
        </div>

        <!-- Effects Panel -->
        <div class="panel effects-panel" id="effectsPanel">
            <div class="panel-header">
                <div class="panel-title">Active Effects</div>
                <span id="effectCount" style="color: var(--text-dim);">0 effects</span>
            </div>
            <div class="effects-list" id="effectsList"></div>
        </div>
    </div>

    <!-- Character Modal -->
    <div class="modal-overlay" id="characterModalOverlay" onclick="closeCharacterModal()"></div>
    <div class="modal" id="characterModal">
        <div class="modal-header">Create Character</div>
        <div class="modal-body">
            <div class="form-group">
                <label class="form-label">Character Name</label>
                <input type="text" class="form-input" id="characterName" placeholder="Enter character name...">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeCharacterModal()">Cancel</button>
            <button class="btn btn-primary" onclick="createCharacter()">Create</button>
        </div>
    </div>

    <!-- Result Modal -->
    <div class="modal-overlay" id="resultModalOverlay" onclick="closeResultModal()"></div>
    <div class="modal result-modal" id="resultModal">
        <div class="result-number" id="resultNumber">#0000</div>
        <div class="result-effect" id="resultEffect">Loading...</div>
        <div class="effect-condition" id="resultCondition" style="display: none;">
            <strong>Condition Required:</strong> Spin duration wheel to determine removal condition
        </div>
        <div class="modal-footer" style="justify-content: center;">
            <button class="btn btn-primary" onclick="addEffectToCharacter()">Add to Character</button>
            <button class="btn btn-outline" onclick="closeResultModal()">Close</button>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- Loading -->
    <div class="loading" id="loading" style="display: none;"></div>

    <!-- Hidden file input for importing -->
    <input type="file" id="importFileInput" accept=".json" style="display: none;">
</body>
</html>